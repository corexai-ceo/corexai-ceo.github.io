<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>AI ê¸°ë°˜ ìœ í•´ì‚¬ì´íŠ¸ ë¦¬ìŠ¤í¬ ìë™ ë¶„ì„ (Beta)</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f7fa;
      padding: 40px;
    }
    .container {
      max-width: 620px;
      margin: auto;
      background: #ffffff;
      padding: 32px;
      border-radius: 10px;
      box-shadow: 0 0 14px rgba(0,0,0,0.1);
    }
    h2 { margin-top: 0; }
    input {
      width: 100%;
      padding: 12px;
      margin-top: 15px;
      font-size: 16px;
      box-sizing: border-box;
    }
    button {
      margin-top: 15px;
      padding: 12px 24px;
      font-size: 16px;
      cursor: pointer;
    }
    .result {
      margin-top: 25px;
      padding: 18px;
      background-color: #eef2f7;
      border-radius: 8px;
      line-height: 1.55;
    }
    hr { margin: 28px 0; }
    small { color: #666; }
  </style>
</head>
<body>

<div class="container">
  <h2>ìœ í•´ì‚¬ì´íŠ¸ ë¦¬ìŠ¤í¬ AI ë¶„ì„ (Beta)</h2>

  <p>
    ì…ë ¥í•œ URLì„ ê¸°ë°˜ìœ¼ë¡œ AIê°€ ì›¹ íŒ¨í„´ì„ ë¶„ì„í•˜ì—¬<br>
    ë„ë°•Â·ì„±ì¸Â·ë¶ˆë²• ì½˜í…ì¸  ìœ„í—˜ ê°€ëŠ¥ì„±ì„ ìë™ìœ¼ë¡œ í‰ê°€í•©ë‹ˆë‹¤.<br>
    <small>â€» ë³¸ ì„œë¹„ìŠ¤ëŠ” í…ŒìŠ¤íŠ¸ ë²„ì „ì…ë‹ˆë‹¤.</small>
  </p>

  <input
    type="text"
    id="urlInput"
    placeholder="ë¶„ì„í•  URL ë˜ëŠ” ë„ë©”ì¸ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: missav.ws)"
  >

  <button onclick="analyzeRisk()">ë¦¬ìŠ¤í¬ ë¶„ì„</button>

  <div id="result" class="result">
    ë¶„ì„ì„ ìœ„í•´ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.
  </div>

  <hr>

  <p>
    <strong>ë¶„ì„ ê°œìš”</strong><br>
    - AI ê¸°ë°˜ ì›¹ ìœ„í—˜ íŒ¨í„´ ìë™ ë¶„ì„<br>
    - ë„ë©”ì¸Â·ì½˜í…ì¸ Â·êµ¬ì¡° íŠ¹ì„± ì¢…í•© íŒë‹¨<br>
    - ëŒ€ê·œëª¨ ìœ í•´ì‚¬ì´íŠ¸ ë°ì´í„° ê¸°ë°˜ í•™ìŠµ ëª¨ë¸ ì ìš©
  </p>
</div>

<!-- ğŸ”¹ Risk Rule Engine -->
<script src="js/riskRules.js"></script>

<!-- ğŸ”¹ UI Logic -->
<script>
function analyzeRisk() {
  const input = document.getElementById("urlInput").value.trim();
  const result = document.getElementById("result");

  if (!input) {
    result.innerHTML = "âš ï¸ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.";
    return;
  }

  // URL ìë™ ë³´ì •
  let target = input;
  if (!/^(https?:)?\/\//i.test(target)) {
    target = "https://" + target;
  }

  // ë¡œë”© ì—°ì¶œ
  result.innerHTML = "AIê°€ ì›¹ íŒ¨í„´ì„ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...";

  setTimeout(() => {
    if (typeof calculateRiskScore !== "function") {
      result.innerHTML = "âš ï¸ ë¶„ì„ ì—”ì§„ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.";
      return;
    }

    const score = calculateRiskScore(target);
    const risk = getRiskLevel(score);
    const reason = generateAIDecisionReason(score);

    // ì ìˆ˜ë³„ ë°°ê²½ ì—°ì¶œ
    result.style.background =
      score >= 70 ? "#fdecea" :
      score >= 40 ? "#fff4e5" :
      "#eef2f7";

    result.innerHTML = `
      <strong style="color:${risk.color}; font-size:18px;">
        ìœ í•´ ìœ„í—˜ ê°€ëŠ¥ì„±: ${risk.label}
      </strong><br><br>

      â–¸ AI ìœ„í—˜ë„ ì ìˆ˜: ${score}<br>
      â–¸ ë¶„ì„ ëŒ€ìƒ ë„ë©”ì¸: ${extractDomain(target)}<br>
      â–¸ AI íŒë‹¨ ê·¼ê±°: ${reason}<br><br>

      <small>
        â€» ë³¸ ê²°ê³¼ëŠ” AI ê¸°ë°˜ ìë™ ë¶„ì„ì„ í†µí•œ ì˜ˆë¹„ íŒë‹¨ ê²°ê³¼ì´ë©°,<br>
        ì‹¤ì œ ì°¨ë‹¨ ë˜ëŠ” ì¡°ì¹˜ëŠ” ì¶”ê°€ ê²€ì¦ ì ˆì°¨ë¥¼ í†µí•´ ê²°ì •ë©ë‹ˆë‹¤.
      </small>
    `;
  }, 500);
}

// Enter í‚¤ ì§€ì›
document.getElementById("urlInput").addEventListener("keydown", e => {
  if (e.key === "Enter") analyzeRisk();
});
</script>

</body>
</html>
